const helpModal=document.getElementById("helpModal");function openHelpModal(){helpModal.classList.add("show-modal")}function closeHelpModal(){helpModal.classList.remove("show-modal")}let moves,interval,totalGameTime,starRating,cardElements=document.getElementsByClassName("game-card"),cardElementsArray=[...cardElements],imgElements=document.getElementsByClassName("game-card-img"),imgElementsArray=[...imgElements],starElements=document.getElementsByClassName("star"),starElementsArray=[...starElements],counter=document.getElementById("moveCounter"),timer=document.getElementById("timer"),modalElement=document.getElementById("gameOverModal"),totalGameMovesElement=document.getElementById("totalGameMoves"),totalGameTimeElement=document.getElementById("totalGameTime"),finalStarRatingElement=document.getElementById("finalStarRating"),closeModalIcon=document.getElementById("closeModal"),openedCards=[],matchedCards=[],second=0,minute=0,hour=0;function shuffle(e){let t,s,a=e.length;for(;0!==a;)s=Math.floor(Math.random()*a),t=e[a-=1],e[a]=e[s],e[s]=t;return e}function startGame(){let e=shuffle(imgElementsArray);for(i=0;i<e.length;i++)cardElements[i].innerHTML="",cardElements[i].appendChild(e[i]),cardElements[i].type=`${e[i].alt}`,cardElements[i].classList.remove("show","open","match","disabled"),cardElements[i].children[0].classList.remove("show-img");for(let e=0;e<cardElementsArray.length;e++)cardElementsArray[e].addEventListener("click",displayCard);flashCards(),moves=0,counter.innerText=`${moves} move(s)`;for(let e=0;e<starElementsArray.length;e++)starElementsArray[e].style.opacity=1;timer.innerHTML="0 mins 0 secs",clearInterval(interval)}function flashCards(){for(i=0;i<cardElements.length;i++)cardElements[i].children[0].classList.add("show-img");setTimeout(function(){for(i=0;i<cardElements.length;i++)cardElements[i].children[0].classList.remove("show-img")},5e3)}function displayCard(){this.children[0].classList.toggle("show-img"),this.classList.toggle("open"),this.classList.toggle("show"),this.classList.toggle("disabled"),cardOpen(this)}function cardOpen(e){openedCards.push(e),2===openedCards.length&&(moveCounter(),openedCards[0].type===openedCards[1].type?matched():unmatched())}function matched(){openedCards[0].classList.add("match"),openedCards[1].classList.add("match"),openedCards[0].classList.remove("show","open"),openedCards[1].classList.remove("show","open"),matchedCards.push(openedCards[0]),matchedCards.push(openedCards[1]),openedCards=[],24==matchedCards.length&&endGame()}function unmatched(){openedCards[0].classList.add("unmatched"),openedCards[1].classList.add("unmatched"),disable(),setTimeout(function(){openedCards[0].classList.remove("show","open","unmatched","disabled"),openedCards[1].classList.remove("show","open","unmatched","disabled"),openedCards[0].children[0].classList.remove("show-img"),openedCards[1].children[0].classList.remove("show-img"),enable(),openedCards=[]},1100)}function disable(){cardElementsArray.filter((e,t,s)=>{e.classList.add("disabled")})}function enable(){cardElementsArray.filter((e,t,s)=>{e.classList.remove("disabled");for(let e=0;e<matchedCards.length;e++)matchedCards[e].classList.add("disabled")})}function moveCounter(){moves++,counter.innerHTML=`${moves} move(s)`,1==moves&&(second=0,minute=0,hour=0,startTimer())}function startTimer(){interval=setInterval(function(){timer.innerHTML=`${minute} mins ${second} secs`,60==++second&&(minute++,second=0),60==minute&&(hour++,minute=0)},1e3)}function endGame(){clearInterval(interval),totalGameTime=timer.innerHTML,starRating=document.querySelector(".rating").innerHTML,modalElement.classList.add("show-modal"),totalGameTimeElement.innerHTML=totalGameTime,totalGameMovesElement.innerHTML=moves,finalStarRatingElement.innerHTML=starRating,matchedCards=[],closeModal()}function closeModal(){closeModalIcon.addEventListener("click",function(){modalElement.classList.remove("show-modal"),startGame()})}function playAgain(){modalElement.classList.remove("show-modal"),startGame()}window.onload=function(){setTimeout(function(){startGame()},1200)};